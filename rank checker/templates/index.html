<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Cutoff Finder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
    :root {
        --primary-color: #FF6B6B;
        --primary-hover: #FF5252;
        --secondary-color: #4ECDC4;
        --secondary-hover: #3DBDB4;
        --accent-color: #FFE66D;
        --accent-hover: #FFD700;
        --text-dark: #292F36;
        --text-medium: #4A4A4A;
        --text-light: #F7FFF7;
        --bg-light: #F7FFF7;
        --bg-gradient: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
        --white: #FFFFFF;
        --shadow: 0 4px 20px rgba(0,0,0,0.1);
        --party-colors: #FF6B6B, #4ECDC4, #FFE66D, #FF9F1C, #A463F2;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-light);
        color: var(--text-medium);
        line-height: 1.6;
        background-image: var(--bg-gradient);
        background-attachment: fixed;
        background-size: cover;
        min-height: 100vh;
    }

    .header {
            text-align: center;
            padding: 20px;
            background-color: rgba(255,255,255,0.9);
            box-shadow: var(--shadow);
            position: static;
            top: 0;
            z-index: 1000;
            border-radius: 0 0 15px 15px;
            margin: 0 20px;
            border: 2px solid var(--accent-color);
        }


    .header h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .header p {
            color: var(--text-medium);
            font-size: 1.1rem;
            margin: 0;
        }
    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
    }

    h2.text-center {
        color: var(--white);
        text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        margin-bottom: 30px;
        padding: 15px;
        background-color: rgba(255,255,255,0.2);
        border-radius: 10px;
        border: 2px solid var(--white);
    }

    /* Search Container */
    .search-container {
        background-color: rgba(255,255,255,0.95);
        border-radius: 15px;
        box-shadow: var(--shadow);
        padding: 25px;
        margin-bottom: 30px;
        border: 2px solid var(--secondary-color);
    }

    .form-label {
        font-weight: 600;
        color: var(--text-dark);
    }

    .form-control, .form-select {
        border: 2px solid var(--secondary-color);
        padding: 12px;
        border-radius: 8px;
        background-color: rgba(255,255,255,0.8);
        transition: all 0.3s;
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(255,107,107,0.3);
        outline: none;
    }

    .voice-btn {
        background-color: var(--secondary-color);
        color: white;
        border: none;
        transition: all 0.3s;
    }

    .voice-btn:hover {
        background-color: var(--secondary-hover);
    }

    /* Filter Section */
    .filter-section {
        background-color: rgba(78,205,196,0.1);
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px dashed var(--secondary-color);
    }

    .filter-section h5 {
        color: var(--primary-color);
        font-weight: 600;
    }

    /* Buttons */
    .btn-primary {
        background-color: var(--primary-color);
        border: none;
        padding: 12px;
        font-weight: 600;
        transition: all 0.3s;
    }

    .btn-primary:hover {
        background-color: var(--primary-hover);
        transform: translateY(-2px);
    }

    /* Loading and No Results */
    .loading {
        background-color: rgba(255,255,255,0.9);
        border-radius: 15px;
        padding: 30px;
        text-align: center;
        display: none;
        margin-bottom: 20px;
        border: 2px solid var(--accent-color);
    }

    .no-results {
        background-color: rgba(255,255,255,0.9);
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        display: none;
        border: 2px solid var(--primary-color);
    }

    .no-results i {
        color: var(--primary-color);
        font-size: 2.5rem;
        margin-bottom: 15px;
    }

    /* Main Grid Layout */
    .main-grid {
        display: grid;
        grid-template-rows: auto 1fr;
        gap: 20px;
    }

    .top-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    /* Colleges Container */
    .colleges-container {
        background-color: rgba(255,255,255,0.95);
        border-radius: 15px;
        padding: 20px;
        box-shadow: var(--shadow);
        border: 2px solid var(--secondary-color);
    }

    .stats-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        margin-bottom: 15px;
        background-color: rgba(255,255,255,0.7);
        border-radius: 8px;
        border: 1px dashed var(--primary-color);
    }

    .stats-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        color: var(--text-dark);
    }

    .stats-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--white);
        background-color: var(--primary-color);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .college-list {
        max-height: 300px;
        overflow-y: auto;
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 10px;
    }

    .college-item {
        padding: 10px;
        border-bottom: 1px solid #eee;
        cursor: pointer;
        transition: all 0.2s;
    }

    .college-item:hover {
        background-color: rgba(78,205,196,0.1);
        padding-left: 15px;
    }

    .college-item:last-child {
        border-bottom: none;
    }

    .no-colleges {
        text-align: center;
        padding: 20px;
        color: var(--text-medium);
    }

    /* Results Container */
    #resultsContainer {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
    }

    .result-card {
        background-color: rgba(255,255,255,0.95);
        border-radius: 15px;
        box-shadow: var(--shadow);
        padding: 20px;
        transition: all 0.3s;
        border: 2px solid var(--accent-color);
    }

    .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .college-name {
        color: var(--primary-color);
        font-weight: bold;
        margin-bottom: 10px;
    }

    .branch-name {
        font-weight: bold;
        color: var(--text-dark);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px dashed var(--secondary-color);
    }

    .badge-category {
        font-size: 0.8rem;
        margin-right: 5px;
        padding: 5px 8px;
    }

    .detail-item {
        margin-bottom: 10px;
    }

    .detail-label {
        font-weight: 500;
        color: var(--text-medium);
    }

    /* Developer Container */
    .developer-container {
        background-color: rgba(255,255,255,0.95);
        border-radius: 15px;
        padding: 30px;
        box-shadow: var(--shadow);
        margin-top: 40px;
        border: 2px solid var(--primary-color);
    }

    .developer-header {
        text-align: center;
        margin-bottom: 25px;
    }

    .developer-photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 5px solid var(--primary-color);
        margin: 0 auto 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .developer-info h2 {
        color: var(--primary-color);
        margin-bottom: 15px;
        text-align: center;
    }

    .developer-info p {
        margin-bottom: 15px;
        color: var(--text-medium);
        line-height: 1.6;
    }

    .developer-info strong {
        color: var(--primary-color);
    }

    .organizations-section {
        margin: 30px 0;
        text-align: center;
    }

    .organizations-section h3 {
        color: var(--primary-color);
        margin-bottom: 20px;
    }

    .organization-logos {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
    }

    .organization-logos a {
        transition: transform 0.3s;
    }

    .organization-logos a:hover {
        transform: scale(1.1);
    }

    .organization-logos img {
        height: 60px;
        border-radius: 5px;
        border: 1px solid rgba(0,0,0,0.1);
    }

    .social-icons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }

    .social-icons a {
        color: var(--primary-color);
        font-size: 24px;
        transition: all 0.3s;
    }

    .social-icons a:hover {
        color: var(--primary-hover);
        transform: scale(1.2);
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .top-section {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 992px) {
        .container {
            padding: 15px;
        }
        
        .search-container {
            padding: 20px;
        }
        
        .colleges-container {
            padding: 15px;
        }
        
        .developer-photo {
            width: 120px;
            height: 120px;
        }
    }

    @media (max-width: 768px) {
        h2.text-center {
            font-size: 1.5rem;
            padding: 10px;
        }
        
        .filter-section {
            padding: 10px;
        }
        
        .stats-value {
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
        }
        
        .developer-container {
            padding: 20px;
        }
        
        .developer-photo {
            width: 100px;
            height: 100px;
        }
        
        .organization-logos img {
            height: 50px;
        }
    }

    @media (max-width: 576px) {
        .search-container {
            padding: 15px;
        }
        
        .form-control, .form-select {
            padding: 10px;
        }
        
        .btn-primary {
            padding: 10px;
        }
        
        .result-card {
            padding: 15px;
        }
        
        .developer-container {
            padding: 15px;
        }
        
        .developer-photo {
            width: 80px;
            height: 80px;
            border-width: 3px;
        }
        
        .organization-logos {
            gap: 10px;
        }
        
        .organization-logos img {
            height: 40px;
        }
        
        .social-icons a {
            font-size: 20px;
        }
    }

    /* Custom Scrollbars */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: rgba(0,0,0,0.05);
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-hover);
    }
</style>
</head>
<body>
    <div class="header">
        <h1>EAPCET College Finder</h1>
        <p>Find colleges based on your rank, category, and preferred courses</p>
    </div>

    <br>
                
                <div class="search-container">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="rankInput" class="form-label">Your Rank</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="rankInput" placeholder="Enter your rank">
                                <button class="btn btn-outline-secondary voice-btn" type="button" id="voiceBtn">
                                    <i class="fas fa-microphone"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="categorySelect" class="form-label">Category</label>
                            <select class="form-select" id="categorySelect">
                                <option value="" selected>All Categories</option>
                                {% for category in categories %}
                                    <option value="{{ category }}">{{ category }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-section mt-3">
                        <h5 class="mb-3">Filters (Optional)</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="branchSelect" class="form-label">Branch</label>
                                <select class="form-select" id="branchSelect">
                                    <option value="" selected>All Branches</option>
                                    {% for branch in branch_names %}
                                        <option value="{{ branch }}">{{ branch }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="collegeTypeSelect" class="form-label">College Type</label>
                                <select class="form-select" id="collegeTypeSelect">
                                    <option value="" selected>All Types</option>
                                    {% for type in college_types %}
                                        <option value="{{ type }}">{{ type }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 mt-4">
                        <button class="btn btn-primary" type="button" id="searchBtn">
                            <i class="fas fa-search me-2"></i>Find Colleges
                        </button>
                    </div>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2">Searching for colleges...</p>
                </div>
                
                <div class="no-results" id="noResults">
                    <i class="fas fa-university fa-3x mb-3 text-muted"></i>
                    <h4>No colleges found matching your criteria</h4>
                    <p class="text-muted">Try adjusting your rank or filters</p>
                </div>
                
                <div class="main-grid">
                    <div class="top-section">
                        <!-- Colleges List Container -->
                        <div class="colleges-container">
                            <div class="stats-container">
                                <div class="stats-title"> 
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>Total Courses</span>
                                </div>
                                <div class="stats-value" id="college-count">0</div>
                            </div>
                            
                            <div class="stats-container">
                                <div class="stats-title">
                                    <i class="fas fa-list"></i>
                                    <span>Total Colleges</span>
                                </div>
                                <div class="stats-value" id="college-list-count">0</div>
                            </div>
                            <div class="college-list" id="college-name-list">
                                <div class="no-colleges">Search for colleges to see results</div>
                            </div>
                        </div>
                        
                        
                    
                    <div id="resultsContainer"></div>
                </div>
            </div>
        </div>
    </div>
     <div class="developer-container">
            <div class="developer-info">
                <div class="developer-header">
                    <img src="https://i.postimg.cc/85qqtHJc/hello.jpg" alt="Developer" class="developer-photo">
                    <h2>About The Developer</h2>
                </div>
                <p>
                    Hello, I'm <strong>Laxmi Nivas Morishetty</strong>, a passionate developer, application builder, and software architect. With expertise in creating impactful digital solutions, I also thrive as a teaching expert and motivational guide, helping others unlock their potential through technology and knowledge.
                </p>
                <p>
                    This platform—<strong>College Cutoff Finder</strong>—is one of our key developments, designed to simplify and streamline the college search process for students. Built with precision and user experience in mind, this application reflects our commitment to creating practical, efficient, and accessible tools for education.
                </p>
                <p>
                    Our work extends across multiple organizations, each contributing to a shared vision of innovation and empowerment. Whether it's developing software, teaching skills, or motivating individuals, our goal is to make technology work for everyone.
                </p>

                <!-- Organizations Section -->
                <div class="organizations-section">
                    <h3>Our Organisations</h3>
                    <div class="organization-logos">
                        <a href="https://smartandlightinnovation.netlify.app/" target="_blank">
                            <img src="https://i.postimg.cc/VkLXHccr/3.png" alt="Smart and Light Innovation">
                        </a>
                        <a href="https://wisdomroots.netlify.app/" target="_blank">
                            <img src="https://i.postimg.cc/BnYHrwqh/4.png" alt="Wisdom Route">
                        </a>
                        <a href="https://padmatutorials.netlify.app/" target="_blank">
                            <img src="https://i.postimg.cc/02vYDwWC/1.png" alt="Padma Tutorials">
                        </a>
                        <a href="https://nivaseditz.netlify.app/" target="_blank">
                            <img src="https://i.postimg.cc/rF9SJw72/2.png" alt="Nivaseditz">
                        </a>
                    </div>
                </div>

                <!-- Social Icons Section -->
                <div class="social-icons">
                    <a href="https://www.instagram.com/laxminivasmorishetty?igsh=cWJ0OXB6dWh3YnRp&utm_source=qr" target="_blank" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://in.linkedin.com/in/laxmi-nivas-morishetty-02468m" target="_blank" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://wa.me/919059160424" target="_blank" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://laxminivasmorishetty.netlify.app/" target="_blank" title="Website">
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.getElementById('searchBtn');
            const voiceBtn = document.getElementById('voiceBtn');
            const rankInput = document.getElementById('rankInput');
            const categorySelect = document.getElementById('categorySelect');
            const branchSelect = document.getElementById('branchSelect');
            const collegeTypeSelect = document.getElementById('collegeTypeSelect');
            const resultsContainer = document.getElementById('resultsContainer');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const noResults = document.getElementById('noResults');
            const collegeCountElement = document.getElementById('college-count');
            const collegeListCountElement = document.getElementById('college-list-count');
            const collegeNameListElement = document.getElementById('college-name-list');
            
            // Search button click handler
            searchBtn.addEventListener('click', function() {
                const rank = rankInput.value.trim();
                const category = categorySelect.value;
                const branch = branchSelect.value;
                const collegeType = collegeTypeSelect.value;
                
                if (!rank) {
                    alert('Please enter your rank');
                    return;
                }
                
                // Show loading indicator
                loadingIndicator.style.display = 'block';
                resultsContainer.innerHTML = '';
                noResults.style.display = 'none';
                collegeNameListElement.innerHTML = '<div class="no-colleges">Searching for colleges...</div>';
                
                // Make API call
                fetch('/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        rank: rank,
                        category: category,
                        branch: branch,
                        college_type: collegeType
                    })
                })
                .then(response => response.json())
                .then(data => {
                    loadingIndicator.style.display = 'none';
                    
                    if (data.success) {
                        if (data.count > 0) {
                            displayResults(data.results);
                            updateCollegeList(data.results);
                        } else {
                            noResults.style.display = 'block';
                            collegeNameListElement.innerHTML = '<div class="no-colleges">No colleges found</div>';
                        }
                    } else {
                        alert('Error: ' + (data.error || 'Unknown error occurred'));
                    }
                })
                .catch(error => {
                    loadingIndicator.style.display = 'none';
                    console.error('Error:', error);
                    alert('An error occurred while searching');
                });
            });
            
            // Voice input handler
            voiceBtn.addEventListener('click', function() {
                if (!('webkitSpeechRecognition' in window)) {
                    alert('Your browser does not support speech recognition. Try Chrome or Edge.');
                    return;
                }
                
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                
                recognition.onstart = function() {
                    voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                    rankInput.placeholder = 'Listening...';
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    rankInput.value = transcript.replace(/\D/g, '');
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    rankInput.placeholder = 'Enter your rank';
                };
                
                recognition.onerror = function(event) {
                    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
                    rankInput.placeholder = 'Enter your rank';
                    console.error('Speech recognition error', event.error);
                };
                
                recognition.start();
            });
            
            // Display results function
            function displayResults(results) {
                resultsContainer.innerHTML = '';
                
                results.forEach(result => {
                    const card = document.createElement('div');
                    card.className = 'result-card';
                    
                    card.innerHTML = `
                        <div class="row">
                            <div class="col-md-8">
                                <h4 class="college-name">${result.name}</h4>
                                <p class="branch-name">${result.branch} (${result.branch_code})</p>
                                
                                <div class="mb-2">
                                    <span class="badge bg-primary badge-category">${result.category}</span>
                                    <span class="badge ${result.gender === 'GIRLS' ? 'bg-danger' : 'bg-info'} badge-category">
                                        ${result.gender}
                                    </span>
                                    <span class="badge bg-secondary badge-category">Cutoff: ${result.cutoff_rank}</span>
                                </div>
                                
                                <div class="detail-item">
                                    <span class="detail-label">College Type:</span> ${result.college_type}
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Co-Ed:</span> ${result.co_ed}
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Location:</span> ${result.place}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="detail-item">
                                    <span class="detail-label">Tuition Fee:</span> ₹${result.tuition_fee.toLocaleString()}/year
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Affiliated To:</span> ${result.affiliated_to}
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Established:</span> ${result.year_established}
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Seats:</span> ${result.seats}
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Duration:</span> ${result.duration}
                                </div>
                                ${result.website ? `<div class="detail-item">
                                    <span class="detail-label">Website:</span> <a href="https://${result.website}" target="_blank">${result.website}</a>
                                </div>` : ''}
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-12">
                                <div class="detail-item">
                                    <span class="detail-label">Facilities:</span> ${result.facilities || 'Not specified'}
                                </div>
                            </div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(card);
                });
            }
            
            // Update college list function
            function updateCollegeList(results) {
                // Count unique colleges
                const uniqueColleges = new Set(results.map(result => result.name));
                collegeCountElement.textContent = results.length;
                collegeListCountElement.textContent = uniqueColleges.size;
                
                // Clear previous list
                collegeNameListElement.innerHTML = '';
                
                // Add each college to the list
                Array.from(uniqueColleges).forEach(collegeName => {
                    const collegeItem = document.createElement('div');
                    collegeItem.className = 'college-item';
                    collegeItem.textContent = collegeName;
                    collegeNameListElement.appendChild(collegeItem);
                });
                
                if (uniqueColleges.size === 0) {
                    collegeNameListElement.innerHTML = '<div class="no-colleges">No colleges found</div>';
                }
            }
        });
    </script>
</body>
</html>